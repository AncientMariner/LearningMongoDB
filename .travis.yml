language: java
services: mongodb


before_script:
  - sleep 15
  - mongo mydb_test --eval 'db.addUser("travis", "test");'
  - mongo mydb_test --eval ' db.mydb_test.insert({  "name" : "Audi", "price" : 92000 } );
                             db.mydb_test.insert({ "name" : "Mercedes", "price" : 57127 } );
                             db.mydb_test.insert({  "name" : "Volvo", "price" : 29000 } );
                             db.mydb_test.insert({  "name" : "Bentley", "price" : 350000 } );
                             db.mydb_test.insert({  "name" : "Citroen", "price" : 21000 } );
                             db.mydb_test.insert({"name" : "Hummer", "price" : 41400 } );
                             db.mydb_test.insert({ "name" : "Volkswagen", "price" : 21600 } );
                             db.mydb_test.insert({ "name" : "Mercury", "price" : "65555" } );
                             db.mydb_test.insert({  "name" : "Ford", "price" : 90000 } );
                             db.mydb_test.insert({  "name" : "Nissan", "price" : 70000 } );
                             db.mydb_test.insert({  "name" : "renault", "price" : 50000 } );
                             db.mydb_test.insert({  "name" : "BMW", "price" : 50000 } );
                             db.mydb_test.insert({ "name" : "Mercedes", "price" : 150000} );
                             db.mydb_test.insert({  "name" : "Mercedes AMG", "price" : 250000} ); '

jdk:
  - oraclejdk8

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  timeout: 86400
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
