language: java
services: mongodb
sudo: false

before_script:
  - sleep 15
    - sudo apt-get update
    - sudo apt-get install -y mongodb-org=3.2.9 mongodb-org-server=3.2.9 mongodb-org-shell=3.2.9 mongodb-org-mongos=3.2.9 mongodb-org-tools=3.2.9
    - sleep 15 #mongo may not be responded directly. See http://docs.travis-ci.com/user/database-setup/#MongoDB
    - mongo --version
    - mongo --eval 'db.mydb_test.insert({"name": "Mercedes AMG", "price" : 250000});'

jdk:
  - oraclejdk8

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  timeout: 86400
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
